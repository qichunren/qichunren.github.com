<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.6 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>使用Jruby来部署Rails应用 - Qichunren blog</title>
<meta name="description" content="为了保护最近做的产品的源代码，需要将项目中的源代码进行保护起来。我目前了解到的方案有以下两种：">



<meta property="og:type" content="article">
<meta property="og:locale" content="zh">
<meta property="og:site_name" content="Qichunren blog">
<meta property="og:title" content="使用Jruby来部署Rails应用">
<meta property="og:url" content="/posts/2011-08-27-deploy-rails-project-with-jruby.html">


  <meta property="og:description" content="为了保护最近做的产品的源代码，需要将项目中的源代码进行保护起来。我目前了解到的方案有以下两种：">







  <meta property="article:published_time" content="2011-08-27T06:36:22+08:00">






<link rel="canonical" href="/posts/2011-08-27-deploy-rails-project-with-jruby.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "qichunren",
      "url": "/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Qichunren blog Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Qichunren blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li><li class="masthead__menu-item">
              <a href="/" >Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/wiki/" >Wiki</a>
            </li><li class="masthead__menu-item">
              <a href="https://github.com/qichunren" >Github</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="使用Jruby来部署Rails应用">
    <meta itemprop="description" content="为了保护最近做的产品的源代码，需要将项目中的源代码进行保护起来。我目前了解到的方案有以下两种：">
    <meta itemprop="datePublished" content="August 27, 2011">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">使用Jruby来部署Rails应用
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>为了保护最近做的产品的源代码，需要将项目中的源代码进行保护起来。我目前了解到的方案有以下两种：</p>

<ol>
  <li>
    <p>使用代码混淆工具</p>
  </li>
  <li>
    <p>使用JRuby将Ruby代码编译成java字节码文件（.class）</p>
  </li>
</ol>

<hr />
<p>第一种方案，有一个名为<a href="http://rubyencoder.com">ruby encoder</a>的产品，我试用了一下，发现太重量级了，我个人只是一个可以将代码混淆一下的小工具而已，而ruby encoder有自己的运行加载机制，源代码二次编码，基于域名可以设置产品过期失效时间等等一系列功能，我不需要这些功能，另外它不是免费的，所以我没有采用这个方案。</p>

<p>第二种方安装就是使用JRuby。整体思路就是将Ruby项目的代码编译成java字节码文件，然后运行于Java环境中。</p>

<hr />
<p>将项目中的ruby文件编译成java的class文件不是一件容易的事情，所幸有一个名为warbler的gem可以帮助我们搞定这一切，它可以将项目打包(.war)，同时可以将ruby代码编译成class文件。然后你将生成好的.war文件放进JAVA应用服务器的应用目录中，如Tomcat的webapps中就可以了。</p>

<p>warbler提供若干个任务可供使用：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>qichunren@qichunren-desktop:~/code/ntdeck$ warble -T
warble compiled    # Feature: precompile all Ruby files
warble config      # Generate a configuration file to customize your archive
warble executable  # Feature: make an executable archive
warble gemjar      # Feature: package gem repository inside a jar
warble pluginize   # Install Warbler tasks in your Rails application
warble version     # Display version of Warbler
warble war         # Create the project war file
warble war:clean   # Remove the project war file
warble war:debug   # Dump diagnostic information
</code></pre></div></div>

<p>平时最常用的就是warble war命令了，需要关注的是warble的配置文件，它的配置文件是通过warble config来生成的，在这个文件中有一系列的配置项可以设置，以下是我的配置文件：</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Disable Rake-environment-task framework detection by uncommenting/setting to false</span>
<span class="c1"># Warbler.framework_detection = false</span>

<span class="c1"># Warbler web application assembly configuration file</span>
<span class="no">Warbler</span><span class="o">::</span><span class="no">Config</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="c1"># Features: additional options controlling how the jar is built.</span>
  <span class="c1"># Currently the following features are supported:</span>
  <span class="c1"># - gemjar: package the gem repository in a jar file in WEB-INF/lib</span>
  <span class="c1"># - executable: embed a web server and make the war executable</span>
  <span class="c1"># - compiled: compile .rb files to .class files</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">features</span> <span class="o">=</span> <span class="sx">%w(executable compiled)</span>

  <span class="c1"># Application directories to be included in the webapp.</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">dirs</span> <span class="o">=</span> <span class="sx">%w(app config db lib log vendor tmp)</span>

  <span class="c1"># Additional files/directories to include, above those in config.dirs</span>
  <span class="c1"># config.includes = FileList["db"]</span>

  <span class="c1"># Additional files/directories to exclude</span>
  <span class="c1"># config.excludes = FileList["lib/tasks/*"]</span>

  <span class="c1"># Additional Java .jar files to include.  Note that if .jar files are placed</span>
  <span class="c1"># in lib (and not otherwise excluded) then they need not be mentioned here.</span>
  <span class="c1"># JRuby and JRuby-Rack are pre-loaded in this list.  Be sure to include your</span>
  <span class="c1"># own versions if you directly set the value</span>
  <span class="c1"># config.java_libs += FileList["lib/java/*.jar"]</span>

  <span class="c1"># Loose Java classes and miscellaneous files to be included.</span>
  <span class="c1"># config.java_classes = FileList["target/classes/**.*"]</span>

  <span class="c1"># One or more pathmaps defining how the java classes should be copied into</span>
  <span class="c1"># the archive. The example pathmap below accompanies the java_classes</span>
  <span class="c1"># configuration above. See http://rake.rubyforge.org/classes/String.html#M000017</span>
  <span class="c1"># for details of how to specify a pathmap.</span>
  <span class="c1"># config.pathmaps.java_classes &lt;&lt; "%{target/classes/,}p"</span>

  <span class="c1"># Bundler support is built-in. If Warbler finds a Gemfile in the</span>
  <span class="c1"># project directory, it will be used to collect the gems to bundle</span>
  <span class="c1"># in your application. If you wish to explicitly disable this</span>
  <span class="c1"># functionality, uncomment here.</span>
  <span class="c1"># config.bundler = false</span>

  <span class="c1"># An array of Bundler groups to avoid including in the war file.</span>
  <span class="c1"># Defaults to ["development", "test"].</span>
  <span class="c1"># config.bundle_without = []</span>

  <span class="c1"># Other gems to be included. If you don't use Bundler or a gemspec</span>
  <span class="c1"># file, you need to tell Warbler which gems your application needs</span>
  <span class="c1"># so that they can be packaged in the archive.</span>
  <span class="c1"># For Rails applications, the Rails gems are included by default</span>
  <span class="c1"># unless the vendor/rails directory is present.</span>
  <span class="c1"># config.gems += ["activerecord-jdbcmysql-adapter", "jruby-openssl"]</span>
  <span class="c1"># config.gems &lt;&lt; "tzinfo"</span>

  <span class="c1"># Uncomment this if you don't want to package rails gem.</span>
  <span class="c1"># config.gems -= ["rails"]</span>

  <span class="c1"># The most recent versions of gems are used.</span>
  <span class="c1"># You can specify versions of gems by using a hash assignment:</span>
  <span class="c1"># config.gems["rails"] = "2.3.10"</span>

  <span class="c1"># You can also use regexps or Gem::Dependency objects for flexibility or</span>
  <span class="c1"># finer-grained control.</span>
  <span class="c1"># config.gems &lt;&lt; /^merb-/</span>
  <span class="c1"># config.gems &lt;&lt; Gem::Dependency.new("merb-core", "= 0.9.3")</span>

  <span class="c1"># Include gem dependencies not mentioned specifically. Default is</span>
  <span class="c1"># true, uncomment to turn off.</span>
  <span class="c1"># config.gem_dependencies = false</span>

  <span class="c1"># Array of regular expressions matching relative paths in gems to be</span>
  <span class="c1"># excluded from the war. Defaults to empty, but you can set it like</span>
  <span class="c1"># below, which excludes test files.</span>
  <span class="c1"># config.gem_excludes = [/^(test|spec)\//]</span>

  <span class="c1"># Pathmaps for controlling how application files are copied into the archive</span>
  <span class="c1"># config.pathmaps.application = ["WEB-INF/%p"]</span>

  <span class="c1"># Name of the archive (without the extension). Defaults to the basename</span>
  <span class="c1"># of the project directory.</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">jar_name</span> <span class="o">=</span> <span class="s2">"ntdeck"</span>

  <span class="c1"># Name of the MANIFEST.MF template for the war file. Defaults to a simple</span>
  <span class="c1"># MANIFEST.MF that contains the version of Warbler used to create the war file.</span>
  <span class="c1"># config.manifest_file = "config/MANIFEST.MF"</span>

  <span class="c1"># When using the 'compiled' feature and specified, only these Ruby</span>
  <span class="c1"># files will be compiled. Default is to compile all \.rb files in</span>
  <span class="c1"># the application.</span>
  <span class="c1"># config.compiled_ruby_files = FileList['app/**/*.rb']</span>
  <span class="n">compile_me</span> <span class="o">=</span> <span class="no">FileList</span><span class="p">[</span><span class="o">*</span><span class="n">config</span><span class="p">.</span><span class="nf">dirs</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="s2">"</span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">/**/*.rb"</span><span class="p">}].</span><span class="nf">exclude</span><span class="p">(</span><span class="s2">"config/compass.rb"</span><span class="p">).</span><span class="nf">exclude</span><span class="p">(</span><span class="s2">"lib/printer/*"</span><span class="p">)</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">compiled_ruby_files</span> <span class="o">=</span> <span class="n">compile_me</span>

  <span class="c1"># === War files only below here ===</span>

  <span class="c1"># Path to the pre-bundled gem directory inside the war file. Default</span>
  <span class="c1"># is 'WEB-INF/gems'. Specify path if gems are already bundled</span>
  <span class="c1"># before running Warbler. This also sets 'gem.path' inside web.xml.</span>
  <span class="c1"># config.gem_path = "WEB-INF/vendor/bundler_gems"</span>

  <span class="c1"># Files for WEB-INF directory (next to web.xml). This contains</span>
  <span class="c1"># web.xml by default. If there is an .erb-File it will be processed</span>
  <span class="c1"># with webxml-config. You may want to exclude this file via</span>
  <span class="c1"># config.excludes.</span>
  <span class="c1"># config.webinf_files += FileList["jboss-web.xml"]</span>

  <span class="c1"># Files to be included in the root of the webapp.  Note that files in public</span>
  <span class="c1"># will have the leading 'public/' part of the path stripped during staging.</span>
  <span class="c1"># config.public_html = FileList["public/**/*", "doc/**/*"]</span>

  <span class="c1"># Pathmaps for controlling how public HTML files are copied into the .war</span>
  <span class="c1"># config.pathmaps.public_html = ["%{public/,}p"]</span>

  <span class="c1"># Value of RAILS_ENV for the webapp -- default as shown below</span>
  <span class="c1"># config.webxml.rails.env = ENV['RAILS_ENV'] || 'production'</span>

  <span class="c1"># Application booter to use, one of :rack, :rails, or :merb (autodetected by default)</span>
  <span class="c1"># config.webxml.booter = :rails</span>

  <span class="c1"># Set JRuby to run in 1.9 mode.</span>
  <span class="c1"># config.webxml.jruby.compat.version = "1.9"</span>

  <span class="c1"># When using the :rack booter, "Rackup" script to use.</span>
  <span class="c1"># - For 'rackup.path', the value points to the location of the rackup</span>
  <span class="c1"># script in the web archive file. You need to make sure this file</span>
  <span class="c1"># gets included in the war, possibly by adding it to config.includes</span>
  <span class="c1"># or config.webinf_files above.</span>
  <span class="c1"># - For 'rackup', the rackup script you provide as an inline string</span>
  <span class="c1">#   is simply embedded in web.xml.</span>
  <span class="c1"># The script is evaluated in a Rack::Builder to load the application.</span>
  <span class="c1"># Examples:</span>
  <span class="c1"># config.webxml.rackup.path = 'WEB-INF/hello.ru'</span>
  <span class="c1"># config.webxml.rackup = %{require './lib/demo'; run Rack::Adapter::Camping.new(Demo)}</span>
  <span class="c1"># config.webxml.rackup = require 'cgi' &amp;&amp; CGI::escapeHTML(File.read("config.ru"))</span>

  <span class="c1"># Control the pool of Rails runtimes. Leaving unspecified means</span>
  <span class="c1"># the pool will grow as needed to service requests. It is recommended</span>
  <span class="c1"># that you fix these values when running a production server!</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">webxml</span><span class="p">.</span><span class="nf">jruby</span><span class="p">.</span><span class="nf">min</span><span class="p">.</span><span class="nf">runtimes</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">webxml</span><span class="p">.</span><span class="nf">jruby</span><span class="p">.</span><span class="nf">max</span><span class="p">.</span><span class="nf">runtimes</span> <span class="o">=</span> <span class="mi">1</span>

  <span class="c1"># JNDI data source name</span>
  <span class="c1"># config.webxml.jndi = 'jdbc/rails'</span>
<span class="k">end</span></code></pre></figure>

<p>需要注意的是config.features = %w(executable compiled)配置中，其中的compiled就是可以将ruby代码编译成class代码的。</p>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2011-08-27T06:36:22+08:00">August 27, 2011</time></p>
        
      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=%E4%BD%BF%E7%94%A8Jruby%E6%9D%A5%E9%83%A8%E7%BD%B2Rails%E5%BA%94%E7%94%A8%20%2Fposts%2F2011-08-27-deploy-rails-project-with-jruby.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=%2Fposts%2F2011-08-27-deploy-rails-project-with-jruby.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=%2Fposts%2F2011-08-27-deploy-rails-project-with-jruby.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/posts/2011-08-18-proxy-in-server-side-for-ajax-crossing-domain.html" class="pagination--pager" title="Set proxy in server side to get crossing domain ajax request
">Previous</a>
    
    
      <a href="/posts/2011-10-13-capture-webpage.html" class="pagination--pager" title="网页截屏的方法
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/posts/2019-09-25-fixed-gem-extension-build-on-arm-buildroot.html" rel="permalink">解决Ruby Gem 扩展的交叉编译
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Fixed ruby gem package cross compile on ARM / i.MX6 with Buildroot tool.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/posts/2016-08-15-get-started-with-autotools.html" rel="permalink">Get started with autotools
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Follow this tutorial to get started with autotools.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/posts/2016-06-22-work-with-binary-data.html" rel="permalink">Work with binary data
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">最近在做一些网络编程方面的东西，之前大多数情况接触的都是文本协议，现在接触的是二进制协议。在此补一下相关知识，下面基本上是以Ruby语言来描述用法。

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/posts/2016-06-21-use-buildroot-cross-build-app.html" rel="permalink">Buildroot简单使用
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  less than 1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">使用 Buildroot 可以方便的灵活的构建一个定制的用于嵌入式平台的Linux系统。

</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 qichunren. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "/posts/2011-08-27-deploy-rails-project-with-jruby.html";  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = "/posts/deploy-rails-project-with-jruby"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    (function() { // DON'T EDIT BELOW THIS LINE
      var d = document, s = d.createElement('script');
      s.src = 'https://qichunrensblog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
